# cargo-rail configuration for HelixDB
# https://github.com/loadingalias/cargo-rail

[unify]
include_paths = true
include_renamed = false
pin_transitives = false
transitive_host = "root"
msrv = true
strict_version_compat = false
exact_pin_handling = "warn"
major_version_conflict = "bump"
detect_unused = true
remove_unused = true
prune_dead_features = true
max_backups = 3


[release]
# HelixDB uses semantic versioning (vX.Y.Z) via zendesk/action-create-release
tag_prefix = "v"
tag_format = "{prefix}{version}"
require_clean = true
publish_delay = 5
create_github_release = false  # Handled by cli.yml workflow
sign_tags = false
changelog_path = "CHANGELOG.md"
changelog_relative_to = "workspace"
require_changelog_entries = false


[change-detection]
# Files that trigger rebuild_all (test everything)
infrastructure = [
  # CI/CD
  ".github/workflows/**",
  ".github/actions/**",

  # Rust workspace/toolchain
  "Cargo.lock",

  # CI scripts
  "clippy_check.sh",

  # cargo-rail config
  ".config/rail.toml",
]

[change-detection.custom]
# Benchmarks - allows benchmark-only CI
benchmarks = [
  "helix-db/benches/**",
]

# Assets (images, logos)
assets = [
  "assets/**",
]
